(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{52:function(e,t,a){e.exports=a(82)},57:function(e,t,a){},58:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(42),o=a.n(r),s=(a(57),a(14)),i=a(24),c=(a(58),a(23)),u=a(15),m=a(12);function d(){var e=Object(u.a)(["\n  display: flex;\n  border: solid blue 2px;\n  color: palevioletred;\n  justify-content: space-between;\n"]);return d=function(){return e},e}var E=m.a.nav(d());var h=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],o=a[1];return Object(n.useEffect)((function(){window.addEventListener("storage",(function(){window.sessionStorage.getItem("userId")||o(!1)}))}),[]),l.a.createElement(E,{className:"navbar container-flex navbar-dark bg-dark fixed-top"},l.a.createElement(s.b,{to:"/",className:"navbar-link"},"Home"),l.a.createElement(s.b,{to:"/chatroom",className:"navbar-link"},"Chat"),l.a.createElement(s.b,{to:"/people",className:"navbar-link"},"People"),l.a.createElement(s.b,{to:"/profile/".concat(window.sessionStorage.getItem("userId")),className:"navbar-link"},"My Profile"),l.a.createElement(s.b,{to:"/feed",className:"navbar-link"},"Feed"),l.a.createElement("h3",{className:"navbar-text"},"GA Bot"),!r&&l.a.createElement("div",{className:"authentication-grouping col-3"},l.a.createElement(s.b,{to:"/login",className:"pr-4"},"Login"),l.a.createElement(s.b,{to:"/signup"},"Sign Up")),r&&l.a.createElement("button",{onClick:function(){return sessionStorage.removeItem("userId"),void sessionStorage.removeItem("jwt")}},"Logout"),e.children)},f=a(47),p=a.n(f),g="";function v(){var e=Object(u.a)(["\n  color: green;\n  margin-top: 10rem;\n  border: solid green 2px;\n\n  #error-message {\n    color: red;\n  }\n"]);return v=function(){return e},e}var y=m.a.div(v()),w=a(7),b=a.n(w);function _(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(""),i=Object(c.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(!1),E=Object(c.a)(d,2),h=E[0],f=E[1];function v(e){switch(e.target.type){case"email":o(e.target.value);break;case"password":m(e.target.value);break;default:console.log("input field type not recognised as username or password"),console.log("input type:",e.target.type,"type:",typeof e.target.type)}}return Object(n.useEffect)((function(){!!sessionStorage.getItem("userId")&&f(!1)}),[]),l.a.createElement(y,null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={auth:{email:r,password:u}};b.a.post(g+"/user_token",t).then((function(e){return function(e){if(console.log("response"),console.log(e),200!=e.status&&201!=e.status)throw new Error("An Error occured.");sessionStorage.setItem("jwt",e.data.jwt)}(e)}),(function(e){f(!0)})).then((function(){return function(){var e,t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=sessionStorage.getItem("jwt"),t={headers:{Authorization:"Bearer "+e}},a=b.a.get(g+"/user/whatsmyid",t),n.abrupt("return",a);case 4:case"end":return n.stop()}}))}()})).then((function(e){return t=e.data,void window.sessionStorage.setItem("userId",t);var t})).catch((function(e){return console.log("ahhhh",e)}))}},l.a.createElement("h3",null,"Login"),h?l.a.createElement("p",{id:"error-message"},"An error occured. Please try again."):null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Email address"),l.a.createElement("input",{name:"something",type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",onChange:v}),l.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",onChange:v})),l.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))}function j(){var e=Object(u.a)(["\n  border: solid red 2px;\n  background-color: palevioletred;\n"]);return j=function(){return e},e}var k=m.a.div(j());var T=function(e){return l.a.createElement(k,null,l.a.createElement("p",null,"Home component"))},S=a(17),O=a(18),x=a(21),I=a(19),B=a(22),C=a(1),N=a(20),P=a(3),U=a(6),H=a(13),F=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(x.a)(this,Object(I.a)(t).call(this,e))).getRelatedFields=function(e){var t=[];return["first_name","last_name","email","username"].map((function(a){return t.push(e[a])})),t},a.updateSelectedUser=function(e){var t=a.state.friends[e-1];a.setState({selectedUser:t})},a.followUser=function(){var e={query:{user_id:window.localStorage.getItem("userId"),friend_id:a.state.selectedUser.id}},t={headers:{Authorization:"Bearer "+sessionStorage.getItem("jwt")}};b.a.post(g+"/follow",e,t),console.log("hi")},a.unfollowUser=function(){var e={query:{user_id:window.localStorage.getItem("userId"),friend_id:a.state.selectedUser.id}},t={headers:{Authorization:"Bearer "+sessionStorage.getItem("jwt")}};b.a.post(g+"/follow",e,t),console.log("hi")},a.state={friends:[],input:"",filteredFriends:[],selectedUser:{}},a}return Object(B.a)(t,e),Object(O.a)(t,[{key:"onChangeHandler",value:function(e){this.setState({input:e.target.value})}},{key:"componentDidMount",value:function(){var e=this,t={headers:{Authorization:"Bearer "+sessionStorage.getItem("jwt")}};return b.a.get(g+"/read_people",t).then((function(t){var a=t.data;e.setState({friends:a})}))}},{key:"render",value:function(){var e=this,t=this.state.friends;return this.friends=t.filter((function(t){return e.getRelatedFields(t).map((function(t){return t.toLowerCase().includes(e.state.input.toLowerCase())})).includes(!0)?t:null})).map((function(t,a){return l.a.createElement("span",{onClick:function(){return e.updateSelectedUser(t.id)}},l.a.createElement(C.a,null,l.a.createElement(P.a,null,l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Title,null,t.first_name," ",t.last_name),l.a.createElement(C.a.Text,null,"@",t.username)))))})),l.a.createElement(N.a,null,l.a.createElement(P.a,null,l.a.createElement("h1",null,"break")),l.a.createElement(P.a,null,l.a.createElement("h1",null,".")),l.a.createElement(P.a,null,l.a.createElement("input",{value:this.state.input,type:"text",onChange:this.onChangeHandler.bind(this)})),l.a.createElement(P.a,null,l.a.createElement(U.a,{md:4},this.friends),l.a.createElement(U.a,{md:8},l.a.createElement(C.a,null,l.a.createElement("a",{href:"/profile/".concat(this.state.selectedUser.id)},l.a.createElement(C.a.Header,null,l.a.createElement("h1",null,this.state.selectedUser.first_name," ",this.state.selectedUser.last_name)),l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Title,null,"@",this.state.selectedUser.username),l.a.createElement(C.a.Text,null,this.state.selectedUser.age),l.a.createElement(C.a.Text,null,this.state.selectedUser.email))),l.a.createElement(C.a.Footer,null,l.a.createElement(H.a,{variant:"primary",onClick:function(){return e.followUser()}},"Follow"),l.a.createElement(H.a,{variant:"outline-primary",onClick:function(){return e.unfollowUser()}},"Unfollow"))))))}}]),t}(l.a.Component),L=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(x.a)(this,Object(I.a)(t).call(this,e))).state={profile:[],following:[],followers:[],posts:[]},a}return Object(B.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={headers:{Authorization:"Bearer "+sessionStorage.getItem("jwt")}},a=this.props.match.params.id;return b.a.get(g+"/profile/".concat(a),t).then((function(t){var a=t.data;e.setState({profile:a.user,following:a.following,followers:a.followers,posts:a.posts})}))}},{key:"renderList",value:function(e){return e.length<1?(this.lonely=l.a.createElement(C.a,null,l.a.createElement(P.a,null,l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Title,null,"No ones here :C")))),this.lonely):(this.list=e.map((function(e,t){return l.a.createElement("a",{href:"/profile/".concat(e.id)},l.a.createElement(C.a,null,l.a.createElement(P.a,null,l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Title,null,e.first_name," ",e.last_name),l.a.createElement(C.a.Text,null,"@",e.username)))))})),this.list)}},{key:"renderPosts",value:function(){var e=this.state.posts;return e.length<1?(this.lonely=l.a.createElement(C.a,null,l.a.createElement(C.a.Header,null,l.a.createElement(C.a.Title,null,this.state.profile.first_name," hasnt posted anything :C")),l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Text,null,"..."))),this.lonely):(this.list=e.map((function(e,t){return l.a.createElement(C.a,null,l.a.createElement(C.a.Header,null,l.a.createElement(C.a.Title,null,e.post_title)),l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Text,null,e.post_content)),l.a.createElement(C.a.Footer,{className:"text-muted"},e.created_at))})),this.list)}},{key:"render",value:function(){var e=this.state.profile;return l.a.createElement(N.a,null,l.a.createElement(P.a,null,l.a.createElement("h1",null,"break")),l.a.createElement(P.a,null,l.a.createElement("h1",null,".")),l.a.createElement(P.a,null,l.a.createElement(U.a,{md:3},l.a.createElement("h1",null,"Following ",this.state.following.length),this.renderList(this.state.following)),l.a.createElement(U.a,{md:6},l.a.createElement(C.a,null,l.a.createElement(C.a.Header,null,l.a.createElement("h1",null,e.first_name," ",e.last_name)),l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Text,null,"@",e.username),l.a.createElement(C.a.Text,null,e.age),l.a.createElement(C.a.Text,null,e.email))),this.renderPosts()),l.a.createElement(U.a,{md:3},l.a.createElement("h1",null,this.state.followers.length," Followers"),this.renderList(this.state.followers))))}}]),t}(l.a.Component),M=Object(i.f)(L),A=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(x.a)(this,Object(I.a)(t).call(this,e))).unfollowUser=function(e){var t={query:{user_id:window.localStorage.getItem("userId"),friend_id:e}},a={headers:{Authorization:"Bearer "+sessionStorage.getItem("jwt")}};b.a.post(g+"/follow",t,a),console.log("hi")},a.state={profile:[],following:[],followers:[],posts:[],my_posts:[],id_index:{},post_filter:"everyone"},a}return Object(B.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={headers:{Authorization:"Bearer "+sessionStorage.getItem("jwt")}},a=sessionStorage.getItem("userId");return b.a.get(g+"/feed/".concat(a),t).then((function(t){var a=t.data;e.setState({profile:a.user,following:a.following,followers:a.followers,posts:a.posts,my_posts:a.my_posts})}))}},{key:"useridToName",value:function(){for(var e=this.state.following,t=0;t<e.length;t++){this.state.id_index[e[t].id]={first_name:e[t].first_name,last_name:e[t].last_name,username:e[t].username}}}},{key:"useridParser",value:function(e,t){return this.state.id_index.id.field}},{key:"renderMyPosts",value:function(){var e=this.state.my_posts;return e.length<1?(this.lonely=l.a.createElement(C.a,null,l.a.createElement(C.a.Header,null,l.a.createElement(C.a.Title,null,"no posts :C")),l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Text,null,"..."))),this.lonely):(this.list=e.map((function(e,t){return l.a.createElement(C.a,null,l.a.createElement(C.a.Header,null,l.a.createElement(C.a.Title,null,e.post_title)),l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Text,null,e.post_content)),l.a.createElement(C.a.Footer,{className:"text-muted"},e.created_at))})),this.list)}},{key:"renderFollowingPosts",value:function(){this.useridToName(),console.log(this.state);var e=this.state.posts;return e.length<1?(this.lonely=l.a.createElement(C.a,null,l.a.createElement(C.a.Header,null,l.a.createElement(C.a.Title,null,"no posts :C")),l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Text,null,"..."))),this.lonely):(this.list=e.map((function(e,t){return l.a.createElement(C.a,null,l.a.createElement(C.a.Header,null,l.a.createElement(C.a.Title,null,e.first_name," ",e.last_name),l.a.createElement(C.a.Text,null,"@",e.username)),l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Title,null,e.post_title),l.a.createElement(C.a.Text,null,e.post_content)),l.a.createElement(C.a.Footer,{className:"text-muted"},e.created_at))})),this.list)}},{key:"togglePostFilterMe",value:function(e){this.setState({post_filter:"me"}),console.log("clicked")}},{key:"togglePostFilterEveryone",value:function(e){this.setState({post_filter:"everyone"}),console.log("clicked")}},{key:"renderPosts",value:function(){return"me"===this.state.post_filter?this.renderMyPosts():this.renderFollowingPosts()}},{key:"renderList",value:function(e){var t=this;return e.length<1?(this.lonely=l.a.createElement(C.a,null,l.a.createElement(P.a,null,l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Title,null,"No ones here :C")))),this.lonely):(this.list=e.map((function(e,a){return l.a.createElement(C.a,null,l.a.createElement(P.a,null,l.a.createElement(C.a.Body,null,l.a.createElement("a",{href:"/profile/".concat(e.id)},l.a.createElement(C.a.Title,null,e.first_name," ",e.last_name)),l.a.createElement(C.a.Text,null,"@",e.username),l.a.createElement("span",{onClick:function(){return t.unfollowUser(e.id)}},l.a.createElement(H.a,{variant:"outline-primary"},"Unfollow")))))})),this.list)}},{key:"postSomething",value:function(){var e={query:{user_id:window.localStorage.getItem("userId"),post_title:"",post_content:""}},t={headers:{Authorization:"Bearer "+sessionStorage.getItem("jwt")}};b.a.post(g+"/follow",e,t),console.log("hi")}},{key:"render",value:function(){var e=this;return l.a.createElement(N.a,null,l.a.createElement(P.a,null,l.a.createElement("h1",null,"break")),l.a.createElement(P.a,null,l.a.createElement("h1",null,".")),l.a.createElement(P.a,null,l.a.createElement(U.a,{md:4},l.a.createElement("h1",null,"Following ",this.state.following.length),this.renderList(this.state.following)),l.a.createElement(U.a,{md:8},l.a.createElement(C.a,null,l.a.createElement(C.a.Header,null,l.a.createElement(C.a.Title,null,l.a.createElement("input",{type:"string",placeholder:"Title"}))),l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Text,null,l.a.createElement("input",{type:"string",placeholder:"Content"}))),l.a.createElement(H.a,{variant:"primary"},"Post"),l.a.createElement("span",{onClick:function(){return e.togglePostFilterMe()}},l.a.createElement(H.a,{variant:"outline-primary"},"My Posts")),l.a.createElement("span",{onClick:function(){return e.togglePostFilterEveryone()}},l.a.createElement(H.a,{variant:"outline-primary"},"Following Posts"))),this.renderPosts())))}}]),t}(l.a.Component),D=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(x.a)(this,Object(I.a)(t).call(this,e))).state={chatrooms:[],selected_room:1,room_info:[],room_users:[],room_messages:[]},a}return Object(B.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={headers:{Authorization:"Bearer "+sessionStorage.getItem("jwt")}};return b.a.get(g+"/chatroom/".concat(this.state.selected_room),t).then((function(t){var a=t.data;e.setState({chatrooms:a.chatrooms,room_info:a.info,room_users:a.users,room_messages:a.messages})}))}},{key:"renderRooms",value:function(){return this.list=this.state.chatrooms.map((function(e,t){return l.a.createElement(C.a,null,l.a.createElement(P.a,null,l.a.createElement(U.a,null,l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Title,null,e.room_name),l.a.createElement(C.a.Text,null,"filler text")))))})),this.list}},{key:"renderChat",value:function(){return this.list=this.state.room_messages.map((function(e,t){return l.a.createElement(C.a,null,l.a.createElement(P.a,null,l.a.createElement(U.a,null,l.a.createElement(C.a.Header,null,e.user_id)),l.a.createElement(U.a,null,l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Text,null,e.message)))))})),this.list}},{key:"renderParticipants",value:function(){return this.list=this.state.room_users.map((function(e,t){return l.a.createElement("a",{href:"/profile/".concat(e.id)},l.a.createElement(C.a,null,l.a.createElement(P.a,null,l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Title,null,e.first_name," ",e.last_name),l.a.createElement(C.a.Text,null,"@",e.username)))))})),console.log(this.state),this.list}},{key:"render",value:function(){return l.a.createElement(N.a,null,l.a.createElement(P.a,null,l.a.createElement("h1",null,"break")),l.a.createElement(P.a,null,l.a.createElement("h1",null,".")),l.a.createElement(P.a,null,l.a.createElement(U.a,{md:3},l.a.createElement("h1",null,"chatroom list:"),this.renderRooms()),l.a.createElement(U.a,{md:6},l.a.createElement("h1",null,this.state.room_info.room_name),this.renderChat(),l.a.createElement(P.a,null,l.a.createElement("input",{type:"string"}),l.a.createElement(H.a,{variant:"primary"},"Send"))),l.a.createElement(U.a,{md:3},l.a.createElement("h1",null,"chat participants"),this.renderParticipants())))}}]),t}(l.a.Component);function z(){var e=Object(u.a)(["\n  background-color: palevioletred;\n"]);return z=function(){return e},e}var R=m.a.div(z()),q=a(49);function Y(){var e=Object(u.a)(["\n  border: solid violet 2px;\n"]);return Y=function(){return e},e}var G=m.a.aside(Y());var W=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],o=a[1];return e.chatroomId,fetch(g+"/chatroom/members").then((function(e){return e.json()})).then((function(e){return o((Object(q.a)("chatMembers"),r=e))})),l.a.createElement(G,null,l.a.createElement("p",null,"===BEGIN STYLED_CHAT_MEMBER_LIST==="),r,"j",l.a.createElement("p",null,"===END STYLED_CHAT_MEMBER_LIST==="))};var J=function(e){return l.a.createElement(R,null,l.a.createElement("p",null,"===BEGIN STYLEDCHATROOM==="),l.a.createElement(W,null),l.a.createElement(R,null),l.a.createElement("p",null,"===END STYLEDCHATROOM==="))};var $=function(){return l.a.createElement(s.a,null,l.a.createElement(h,null),l.a.createElement(i.c,null,l.a.createElement(i.a,{path:"/feed"},l.a.createElement(A,null)),l.a.createElement(i.a,{path:"/chatroom"},l.a.createElement(D,null)),l.a.createElement(i.a,{path:"/profile/:id"},l.a.createElement(M,null)),l.a.createElement(i.a,{path:"/people"},l.a.createElement(F,null)),l.a.createElement(i.a,{path:"/chatroom"},l.a.createElement(J,null)),l.a.createElement(i.a,{path:"/profile"},l.a.createElement(_,null)),l.a.createElement(i.a,{path:"/login"},l.a.createElement(_,null)),l.a.createElement(i.a,{path:"/signup"},l.a.createElement(_,null)),l.a.createElement(i.a,{path:"/"},l.a.createElement(T,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(81);o.a.render(l.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.6adcc491.chunk.js.map